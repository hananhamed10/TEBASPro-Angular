<div class="container mt-4">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a routerLink="/categories" class="text-decoration-none">
          {{ 'categories' | capitalize:true }}
        </a>
      </li>
      <li class="breadcrumb-item active">{{ category.name | uppercaseFirst }}</li>
    </ol>
  </nav>

  <!-- Category Header -->
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="text-primary">{{ category.name | uppercaseFirst }}</h1>
      <p class="lead text-muted">{{ category.description | uppercaseFirst }}</p>
      <div class="d-flex align-items-center">
        <span class="badge bg-success me-3">
          {{ products.length }} {{ 'products' | capitalize }}
        </span>
        <a [routerLink]="['/categories', categoryId]" class="btn btn-outline-primary btn-sm">
          <i class="fas fa-info-circle me-1"></i>
          {{ 'category details' | capitalize:true }}
        </a>
      </div>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="row">
    <div class="col-md-6 col-lg-3 mb-4" *ngFor="let product of products">
      <div class="card product-card h-100 shadow-sm">
        <!-- Product Image -->
        <img [src]="product.image" [alt]="product.name" 
             class="card-img-top" style="height: 200px; object-fit: cover;">
        
        <!-- Stock Badge -->
        <div class="position-absolute top-0 end-0 m-2">
          <span class="badge" [ngClass]="product.inStock ? 'bg-success' : 'bg-danger'">
            {{ product.inStock ? 'In Stock' : 'Out of Stock' }}
          </span>
        </div>

        <div class="card-body d-flex flex-column">
          <!-- Product Name -->
          <h5 class="card-title">{{ product.name | uppercaseFirst }}</h5>
          
          <!-- Rating -->
          <div class="rating mb-2">
            <i class="fas fa-star text-warning" *ngFor="let star of [1,2,3,4,5]"
               [class.text-muted]="star > product.rating"></i>
            <small class="text-muted ms-1">({{ product.rating }})</small>
          </div>

          <!-- Description -->
          <p class="card-text text-muted flex-grow-1">
            {{ product.description | truncate:80 }}
          </p>

          <!-- Price -->
          <div class="mb-3">
            <span class="h5 text-primary">{{ product.price | customCurrency:'USD' }}</span>
          </div>

          <!-- Actions -->
          <div class="btn-group w-100">
            <a [routerLink]="['/products', product.id]" class="btn btn-primary flex-fill">
              <i class="fas fa-eye me-1"></i>
              {{ 'view details' | capitalize:true }}
            </a>
            <button class="btn btn-success" [disabled]="!product.inStock" 
                    (click)="addToCart(product)">
              <i class="fas fa-cart-plus"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="products.length === 0" class="text-center py-5">
    <i class="fas fa-box-open fa-4x text-muted mb-3"></i>
    <h3 class="text-muted">{{ 'no products found' | capitalize:true }}</h3>
    <p class="text-muted">{{ 'there are no products in this category yet' | uppercaseFirst }}</p>
    <a routerLink="/categories" class="btn btn-primary">
      {{ 'browse other categories' | capitalize:true }}
    </a>
  </div>
</div>